# BadSMTP Configuration (YAML format)
# Property names use snake_case to match Koanf mapstructure keys

# Basic Configuration
# Main port to listen on (default: 2525)
port: 2525

# Directory for storing messages in Maildir format (default: ./mailbox)
# Set to empty string to disable message storage
mailbox_dir: "./mailbox"

# IP address to bind to (default: 127.0.0.1)
# Set to 0.0.0.0 to bind all interfaces
listen_address: "127.0.0.1"

# Port Behaviour Configuration
# These port ranges trigger specific behaviours for testing SMTP clients

# Starting port for greeting delay range (default: 25200)
# Ports 25200..25209 map to discrete delays {0s,1s,2s,8s,10s,30s,60s,120s,300s,600s}
# Use offsets 0..9 from the base (e.g. 25200 -> 0s, 25201 -> 1s, 25203 -> 8s)
greeting_delay_port_start: 25200

# Starting port for drop delay range (default: 25600)
# Ports 25600..25609 map to the same discrete delays (offset 0 is immediate drop)
drop_delay_port_start: 25600

# Note: Immediate drop is represented by drop_delay_port_start + offset 0 (25600)
# The previous separate immediate_drop_port config has been removed.

# TLS Configuration
# Port for implicit TLS (SMTPS) connections (default: 25465)
tls_port: 25465

# Port for STARTTLS connections (default: 25587)
starttls_port: 25587

# Hostname for TLS certificates (default: badsmtp.test)
# Used for self-signed certificate generation
tls_hostname: "badsmtp.test"

# Optional: Path to custom TLS certificate and key files
# If not specified, self-signed certificates will be generated automatically
# tls_cert_file: "/path/to/cert.pem"
# tls_key_file: "/path/to/key.pem"

# Hostname-based Routing (optional)
# Enable routing messages to different mailbox directories based on RCPT TO hostname
enable_hostname_routing: false

# Default mailbox directory
default_mailbox_dir: ""

# Note: Logging configuration is loaded from environment variables (LOG_*)
# See badsmtp.env.example for logging configuration options